"undefined"==typeof window.Mozilla&&(window.Mozilla={}),function(){"use strict";var i,a={},r=["https://accounts.firefox.com.cn/","https://accounts.firefox.com/","https://accounts.stage.mozaws.net/","https://getpocket.com/","https://guardian-dev.herokuapp.com/","https://latest.dev.lcip.org/","https://monitor.firefox.com/","https://stage-vpn.guardian.nonprod.cloudops.mozgcp.net/","https://vpn.mozilla.org/"];a.getHostName=function(t){var e=t.match(/^https?:\/\/(?:[^/?#]+)(?:[/?#]|$)/i);return e&&e[0]},a.fetchTokens=function(t){var e=t[0].getAttribute("href"),n=t[0].getAttribute("data-action")+"metrics-flow",i=e.match(/\?(.*)/)[1],o=window._SearchParams.queryStringToObject(i);return n+="?form_type="+o.form_type,n+="&entrypoint="+o.entrypoint,n+="&utm_source="+o.utm_source,o.utm_campaign&&(n+="&utm_campaign="+o.utm_campaign),o.utm_content&&(n+="&utm_content="+o.utm_content),o.utm_term&&(n+="&utm_term="+o.utm_term),o.entrypoint_experiment&&(n+="&entrypoint_experiment="+o.entrypoint_experiment),o.entrypoint_variation&&(n+="&entrypoint_variation="+o.entrypoint_variation),fetch(n).then(function(t){return t.json()}).then(function(t){var e="&device_id="+t.deviceId;return e+="&flow_begin_time="+t.flowBeginTime,e+="&flow_id="+t.flowId})["catch"](function(){})},a.updateProductLinks=function(t,e){if(e)for(var n=0;n<t.length;n++){var i=t[n].href,o=a.getHostName(i);o&&-1!==r.indexOf(o)&&-1===i.indexOf("flow_id")&&-1===i.indexOf("flow_begin_time")&&-1===i.indexOf("device_id")&&(t[n].href+=e)}},a.switchDistribution=function(t){for(var e=0;e<t.length;e++){var n=t[e].getAttribute("data-mozillaonline-action"),i=t[e].getAttribute("data-mozillaonline-link");n&&i&&(t[e].href=i,t[e].setAttribute("data-action",n))}},a.configureRequest=function(){return new window.Promise(function(n){Mozilla.Client.getFirefoxDetails(function(t){var e=document.querySelectorAll(".js-fxa-product-button[data-mozillaonline-link]");e.length&&t.accurate&&t.distribution&&"mozillaonline"===t.distribution.toLowerCase()?(a.switchDistribution(e),a.fetchTokens(e).then(function(t){a.updateProductLinks(e,t),n()})):a.fetchTokens(i).then(function(t){a.updateProductLinks(i,t),n()})})})},a.isSupported=function(){return"Promise"in window&&"fetch"in window},a.init=function(){return i=document.getElementsByClassName("js-fxa-product-button"),!(!a.isSupported()||0===i.length)&&new window.Promise(function(e,t){i.length?Mozilla.Client._isFirefoxDesktop()?a.configureRequest().then(function(){e()}):a.fetchTokens(i).then(function(t){a.updateProductLinks(i,t),e()}):t()})},window.Mozilla.FxaProductButton=a}(),"undefined"==typeof window.Mozilla&&(window.Mozilla={}),function(){"use strict";var n,o={};o.countryCode=null;var i=!1,e=["at","be","de","es","fr","it"],a=["ch"];o.getLocation=function(){n=setTimeout(o.onRequestComplete,15e3);var t=new window.XMLHttpRequest;t.onload=function(t){var e=null;if(200<=t.target.status&&t.target.status<300)try{e=JSON.parse(t.target.responseText).country_code.toLowerCase()}catch(n){}o.onRequestComplete(e)},t.open("GET","/country-code.json"),t.timeout=15e3,t.send()},o.hasGeoOverride=function(t){var e=t||window.location.href;if(-1!==e.indexOf("geo=")&&-1===e.indexOf("www.mozilla.org")){var n=/geo=([a-z]{2})/i.exec(e);return!!n&&n[1].toLowerCase()}return!1},o.onRequestComplete=function(t){clearTimeout(n),o.countryCode="string"==typeof t?t:null;var e=o.getAvailability(o.countryCode);i||(i=!0,o.setAvailability(e))},o.getAvailability=function(t,e){var n=document.getElementsByTagName("html")[0].getAttribute("data-vpn-country-codes");return n="string"==typeof n?n:e,t&&"string"==typeof n?t&&-1!==n.indexOf("|"+t+"|")?(window.dataLayer.push({event:"non-interaction",eAction:"vpn-availability",eLabel:"available"}),"available"):(window.dataLayer.push({event:"non-interaction",eAction:"vpn-availability",eLabel:"not-available"}),"not-available"):(window.dataLayer.push({event:"non-interaction",eAction:"vpn-availability",eLabel:"unknown"}),"unknown")},o.setAvailability=function(t){"not-available"===t?o.showJoinWaitList():o.showPricing()},o.showJoinWaitList=function(){document.body.classList.add("show-vpn-waitlist"),o.renderJoinWaitlistButtons()},o.showPricing=function(){document.body.classList.add("show-vpn-pricing"),o.setDisplayPrice(),o.setSubscriptionButtons(),"function"==typeof o.onGeoReadyCallback&&o.onGeoReadyCallback(o.countryCode),"undefined"!=typeof Mozilla.FxaProductButton&&Mozilla.FxaProductButton.init()},o.setSubscriptionButtons=function(){var t=document.querySelectorAll(".vpn-pricing-variable-plans .js-fxa-product-button");if("string"==typeof o.countryCode)for(var e=0;e<t.length;e++){var n,i=t[e].href;(n=t[e].getAttribute("data-plan-"+o.countryCode))||(n=t[e].getAttribute("data-plan-us")),t[e].href=o.updateSubscriptionURL(n,i)}},o.updateSubscriptionURL=function(t,e){var n;return"string"==typeof t&&"string"==typeof e&&(n=new window._SearchParams(e.split("?")[1])).has("plan")?(n.set("plan",t),e.split("?")[0]+"?"+n.toString()):e},o.getCurrency=function(t){return-1!==e.indexOf(t)?"euro":-1!==a.indexOf(t)?"chf":"usd"},o.setDisplayPrice=function(){var t=document.querySelectorAll(".js-vpn-monthly-price-display, .js-vpn-total-price-display, .js-vpn-saving-display");if("string"==typeof o.countryCode)for(var e=o.getCurrency(o.countryCode),n=0;n<t.length;n++){var i;(i="euro"===e?t[n].getAttribute("data-price-euro"):"chf"===e?t[n].getAttribute("data-price-chf"):t[n].getAttribute("data-price-usd"))&&(t[n].innerHTML=i)}},o.renderJoinWaitlistButtons=function(){var t,e,n=document.getElementById("join-waitlist-template"),i=document.querySelector(".js-target-primary-cta"),o=document.querySelectorAll(".js-target-secondary-cta"),a=document.querySelector(".js-target-navigation-cta"),r=document.querySelector(".js-target-footer-cta"),c=n.content||n;if(n&&c){i&&((e=(t=c.querySelector(".js-vpn-waitlist").cloneNode(!0)).querySelector(".mzp-c-button")).classList.add("mzp-t-xl"),e.setAttribute("data-cta-position","primary"),i.appendChild(t)),a&&((e=(t=c.querySelector(".js-vpn-waitlist").cloneNode(!0)).querySelector(".mzp-c-button")).classList.add("mzp-t-secondary"),e.classList.add("mzp-t-md"),e.setAttribute("data-cta-position","navigation"),a.appendChild(e));for(var u=0;u<o.length;u++)(e=(t=c.querySelector(".js-vpn-waitlist").cloneNode(!0)).querySelector(".mzp-c-button")).classList.add("mzp-t-xl"),e.setAttribute("data-cta-position","secondary"),o[u].appendChild(t);r&&((e=(t=c.querySelector(".js-vpn-waitlist").cloneNode(!0)).querySelector(".mzp-c-button")).classList.add("mzp-t-xl"),e.setAttribute("data-cta-position","secondary"),r.appendChild(t))}},o.init=function(){var t=o.hasGeoOverride();if(t){o.countryCode=t;var e=o.getAvailability(o.countryCode);o.setAvailability(e)}else o.getLocation()},window.Mozilla.VPN=o}(),function(){"use strict";Mozilla.VPN.init()}(),function(){"use strict";if("undefined"!=typeof window.matchMedia&&window.matchMedia("(min-width: 768px)").matches){var t=0,e=document.querySelector(".vpn-hero-image");setInterval(function(){t=(t+1)%5,e.setAttribute("data-illustration","n-"+(t+1))},5e3)}}(),function(){"use strict";function t(){var t=function e(){var t=window.location.hash;return-1<t.indexOf("#")&&(t=t.split("#")[1]),t}();t&&function n(t){var e=document.getElementById(t);if(e&&e.classList.contains("vpn-faq-item")&&!e.hasAttribute("open")){var n=e.querySelector("summary");n&&n.click()}}(t)}window.location.hash&&t(),window.addEventListener("hashchange",t,!1)}();